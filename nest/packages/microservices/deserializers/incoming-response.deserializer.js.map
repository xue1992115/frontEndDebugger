{"version":3,"file":"incoming-response.deserializer.js","sourceRoot":"","sources":["incoming-response.deserializer.ts"],"names":[],"mappings":";;;AAAA,oEAAgE;AAGhE;;GAEG;AACH,MAAa,4BAA4B;IACvC,WAAW,CAAC,KAAU,EAAE,OAA6B;QACnD,OAAO,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;IAClE,CAAC;IAED,UAAU,CAAC,KAAU;QACnB,IAAI,CAAC,KAAK,EAAE;YACV,OAAO,IAAI,CAAC;SACb;QACD,IACE,CAAC,IAAA,0BAAW,EAAE,KAA0B,CAAC,GAAG,CAAC;YAC7C,CAAC,IAAA,0BAAW,EAAE,KAA0B,CAAC,QAAQ,CAAC;YAClD,CAAC,IAAA,0BAAW,EAAE,KAA0B,CAAC,UAAU,CAAC,EACpD;YACA,OAAO,KAAK,CAAC;SACd;QACD,OAAO,IAAI,CAAC;IACd,CAAC;IAED,WAAW,CAAC,KAAU;QACpB,OAAO;YACL,EAAE,EAAE,KAAK,IAAI,KAAK,CAAC,EAAE;YACrB,QAAQ,EAAE,KAAK;YACf,UAAU,EAAE,IAAI;SACjB,CAAC;IACJ,CAAC;CACF;AA1BD,oEA0BC","sourcesContent":["import { isUndefined } from '@nestjs/common/utils/shared.utils';\nimport { IncomingResponse, ProducerDeserializer } from '../interfaces';\n\n/**\n * @publicApi\n */\nexport class IncomingResponseDeserializer implements ProducerDeserializer {\n  deserialize(value: any, options?: Record<string, any>): IncomingResponse {\n    return this.isExternal(value) ? this.mapToSchema(value) : value;\n  }\n\n  isExternal(value: any): boolean {\n    if (!value) {\n      return true;\n    }\n    if (\n      !isUndefined((value as IncomingResponse).err) ||\n      !isUndefined((value as IncomingResponse).response) ||\n      !isUndefined((value as IncomingResponse).isDisposed)\n    ) {\n      return false;\n    }\n    return true;\n  }\n\n  mapToSchema(value: any): IncomingResponse {\n    return {\n      id: value && value.id,\n      response: value,\n      isDisposed: true,\n    };\n  }\n}\n"]}