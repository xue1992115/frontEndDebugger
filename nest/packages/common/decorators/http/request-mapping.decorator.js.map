{"version":3,"file":"request-mapping.decorator.js","sourceRoot":"/Users/hanxiaoxue/Documents/work/frontEndDebugger/nest/packages/common/","sources":["decorators/http/request-mapping.decorator.ts"],"names":[],"mappings":";;;AAAA,+CAAiE;AACjE,yEAAgE;AAOhE,MAAM,eAAe,GAAG;IACtB,CAAC,yBAAa,CAAC,EAAE,GAAG;IACpB,CAAC,2BAAe,CAAC,EAAE,mCAAa,CAAC,GAAG;CACrC,CAAC;AAEK,MAAM,cAAc,GAAG,CAC5B,WAAmC,eAAe,EACjC,EAAE;IACnB,MAAM,YAAY,GAAG,QAAQ,CAAC,yBAAa,CAAC,CAAC;IAC7C,MAAM,IAAI,GAAG,YAAY,IAAI,YAAY,CAAC,MAAM,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,GAAG,CAAC;IACtE,MAAM,aAAa,GAAG,QAAQ,CAAC,2BAAe,CAAC,IAAI,mCAAa,CAAC,GAAG,CAAC;IAErE,OAAO,CACL,MAAc,EACd,GAAoB,EACpB,UAAwC,EACxC,EAAE;QACF,OAAO,CAAC,cAAc,CAAC,yBAAa,EAAE,IAAI,EAAE,UAAU,CAAC,KAAK,CAAC,CAAC;QAC9D,OAAO,CAAC,cAAc,CAAC,2BAAe,EAAE,aAAa,EAAE,UAAU,CAAC,KAAK,CAAC,CAAC;QACzE,OAAO,UAAU,CAAC;IACpB,CAAC,CAAC;AACJ,CAAC,CAAC;AAhBW,QAAA,cAAc,kBAgBzB;AAEF,MAAM,sBAAsB,GAC1B,CAAC,MAAqB,EAAE,EAAE,CAC1B,CAAC,IAAwB,EAAmB,EAAE;IAC5C,OAAO,IAAA,sBAAc,EAAC;QACpB,CAAC,yBAAa,CAAC,EAAE,IAAI;QACrB,CAAC,2BAAe,CAAC,EAAE,MAAM;KAC1B,CAAC,CAAC;AACL,CAAC,CAAC;AAEJ;;;;;;GAMG;AACU,QAAA,IAAI,GAAG,sBAAsB,CAAC,mCAAa,CAAC,IAAI,CAAC,CAAC;AAE/D;;;;;;GAMG;AACU,QAAA,GAAG,GAAG,sBAAsB,CAAC,mCAAa,CAAC,GAAG,CAAC,CAAC;AAE7D;;;;;;GAMG;AACU,QAAA,MAAM,GAAG,sBAAsB,CAAC,mCAAa,CAAC,MAAM,CAAC,CAAC;AAEnE;;;;;;GAMG;AACU,QAAA,GAAG,GAAG,sBAAsB,CAAC,mCAAa,CAAC,GAAG,CAAC,CAAC;AAE7D;;;;;;GAMG;AACU,QAAA,KAAK,GAAG,sBAAsB,CAAC,mCAAa,CAAC,KAAK,CAAC,CAAC;AAEjE;;;;;;GAMG;AACU,QAAA,OAAO,GAAG,sBAAsB,CAAC,mCAAa,CAAC,OAAO,CAAC,CAAC;AAErE;;;;;;GAMG;AACU,QAAA,IAAI,GAAG,sBAAsB,CAAC,mCAAa,CAAC,IAAI,CAAC,CAAC;AAE/D;;;;;;GAMG;AACU,QAAA,GAAG,GAAG,sBAAsB,CAAC,mCAAa,CAAC,GAAG,CAAC,CAAC","sourcesContent":["import { METHOD_METADATA, PATH_METADATA } from '../../constants';\nimport { RequestMethod } from '../../enums/request-method.enum';\n\nexport interface RequestMappingMetadata {\n  path?: string | string[];\n  method?: RequestMethod;\n}\n\nconst defaultMetadata = {\n  [PATH_METADATA]: '/',\n  [METHOD_METADATA]: RequestMethod.GET,\n};\n\nexport const RequestMapping = (\n  metadata: RequestMappingMetadata = defaultMetadata,\n): MethodDecorator => {\n  const pathMetadata = metadata[PATH_METADATA];\n  const path = pathMetadata && pathMetadata.length ? pathMetadata : '/';\n  const requestMethod = metadata[METHOD_METADATA] || RequestMethod.GET;\n\n  return (\n    target: object,\n    key: string | symbol,\n    descriptor: TypedPropertyDescriptor<any>,\n  ) => {\n    Reflect.defineMetadata(PATH_METADATA, path, descriptor.value);\n    Reflect.defineMetadata(METHOD_METADATA, requestMethod, descriptor.value);\n    return descriptor;\n  };\n};\n\nconst createMappingDecorator =\n  (method: RequestMethod) =>\n  (path?: string | string[]): MethodDecorator => {\n    return RequestMapping({\n      [PATH_METADATA]: path,\n      [METHOD_METADATA]: method,\n    });\n  };\n\n/**\n * Route handler (method) Decorator. Routes HTTP POST requests to the specified path.\n *\n * @see [Routing](https://docs.nestjs.com/controllers#routing)\n *\n * @publicApi\n */\nexport const Post = createMappingDecorator(RequestMethod.POST);\n\n/**\n * Route handler (method) Decorator. Routes HTTP GET requests to the specified path.\n *\n * @see [Routing](https://docs.nestjs.com/controllers#routing)\n *\n * @publicApi\n */\nexport const Get = createMappingDecorator(RequestMethod.GET);\n\n/**\n * Route handler (method) Decorator. Routes HTTP DELETE requests to the specified path.\n *\n * @see [Routing](https://docs.nestjs.com/controllers#routing)\n *\n * @publicApi\n */\nexport const Delete = createMappingDecorator(RequestMethod.DELETE);\n\n/**\n * Route handler (method) Decorator. Routes HTTP PUT requests to the specified path.\n *\n * @see [Routing](https://docs.nestjs.com/controllers#routing)\n *\n * @publicApi\n */\nexport const Put = createMappingDecorator(RequestMethod.PUT);\n\n/**\n * Route handler (method) Decorator. Routes HTTP PATCH requests to the specified path.\n *\n * @see [Routing](https://docs.nestjs.com/controllers#routing)\n *\n * @publicApi\n */\nexport const Patch = createMappingDecorator(RequestMethod.PATCH);\n\n/**\n * Route handler (method) Decorator. Routes HTTP OPTIONS requests to the specified path.\n *\n * @see [Routing](https://docs.nestjs.com/controllers#routing)\n *\n * @publicApi\n */\nexport const Options = createMappingDecorator(RequestMethod.OPTIONS);\n\n/**\n * Route handler (method) Decorator. Routes HTTP HEAD requests to the specified path.\n *\n * @see [Routing](https://docs.nestjs.com/controllers#routing)\n *\n * @publicApi\n */\nexport const Head = createMappingDecorator(RequestMethod.HEAD);\n\n/**\n * Route handler (method) Decorator. Routes all HTTP requests to the specified path.\n *\n * @see [Routing](https://docs.nestjs.com/controllers#routing)\n *\n * @publicApi\n */\nexport const All = createMappingDecorator(RequestMethod.ALL);\n"]}