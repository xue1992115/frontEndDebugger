{"version":3,"file":"get-body-parser-options.util.js","sourceRoot":"/Users/hanxiaoxue/Documents/work/frontEndDebugger/nest/packages/platform-express/","sources":["adapters/utils/get-body-parser-options.util.ts"],"names":[],"mappings":";;;AAIA,MAAM,aAAa,GAAG,CACpB,GAAoC,EACpC,IAAoB,EACpB,MAAc,EACd,EAAE;IACF,IAAI,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE;QAC3B,GAAG,CAAC,OAAO,GAAG,MAAM,CAAC;KACtB;IACD,OAAO,IAAI,CAAC;AACd,CAAC,CAAC;AAEF,SAAgB,oBAAoB,CAClC,OAAgB,EAChB,OAA6C;IAE7C,IAAI,aAAa,GAAY,CAAC,OAAO,IAAI,EAAE,CAAY,CAAC;IAExD,IAAI,OAAO,KAAK,IAAI,EAAE;QACpB,aAAa,mCACR,aAAa,KAChB,MAAM,EAAE,aAAa,GACtB,CAAC;KACH;IAED,OAAO,aAAa,CAAC;AACvB,CAAC;AAdD,oDAcC","sourcesContent":["import type { RawBodyRequest } from '@nestjs/common';\nimport type { IncomingMessage, ServerResponse } from 'http';\nimport type { NestExpressBodyParserOptions } from '../../interfaces';\n\nconst rawBodyParser = (\n  req: RawBodyRequest<IncomingMessage>,\n  _res: ServerResponse,\n  buffer: Buffer,\n) => {\n  if (Buffer.isBuffer(buffer)) {\n    req.rawBody = buffer;\n  }\n  return true;\n};\n\nexport function getBodyParserOptions<Options = NestExpressBodyParserOptions>(\n  rawBody: boolean,\n  options?: Omit<Options, 'verify'> | undefined,\n): Options {\n  let parserOptions: Options = (options || {}) as Options;\n\n  if (rawBody === true) {\n    parserOptions = {\n      ...parserOptions,\n      verify: rawBodyParser,\n    };\n  }\n\n  return parserOptions;\n}\n"]}