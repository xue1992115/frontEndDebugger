{"version":3,"file":"sockets-container.js","sourceRoot":"/Users/hanxiaoxue/Documents/work/frontEndDebugger/nest/packages/websockets/","sources":["sockets-container.ts"],"names":[],"mappings":";;;AAAA,oCAAoC;AAGpC,MAAa,gBAAgB;IAA7B;QACmB,+BAA0B,GAAG,IAAI,GAAG,EAGlD,CAAC;IA8BN,CAAC;IA5BQ,MAAM;QACX,OAAO,IAAI,CAAC,0BAA0B,CAAC;IACzC,CAAC;IAEM,cAAc,CACnB,OAAU;QAEV,MAAM,WAAW,GAAG,IAAI,CAAC,qBAAqB,CAAC,OAAO,CAAC,CAAC;QACxD,OAAO,IAAI,CAAC,0BAA0B,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;IAC1D,CAAC;IAEM,MAAM,CACX,OAAU,EACV,IAA+B;QAE/B,MAAM,WAAW,GAAG,IAAI,CAAC,qBAAqB,CAAC,OAAO,CAAC,CAAC;QACxD,IAAI,CAAC,0BAA0B,CAAC,GAAG,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;IACzD,CAAC;IAEM,KAAK;QACV,IAAI,CAAC,0BAA0B,CAAC,KAAK,EAAE,CAAC;IAC1C,CAAC;IAEO,qBAAqB,CAC3B,OAAU;QAEV,OAAO,IAAI,CAAC,OAAO,EAAE,EAAE,aAAa,EAAE,IAAI,EAAE,CAAC,CAAC;IAChD,CAAC;CACF;AAlCD,4CAkCC","sourcesContent":["import * as hash from 'object-hash';\nimport { GatewayMetadata, ServerAndEventStreamsHost } from './interfaces';\n\nexport class SocketsContainer {\n  private readonly serverAndEventStreamsHosts = new Map<\n    string | RegExp,\n    ServerAndEventStreamsHost\n  >();\n\n  public getAll(): Map<string | RegExp, ServerAndEventStreamsHost> {\n    return this.serverAndEventStreamsHosts;\n  }\n\n  public getOneByConfig<T extends GatewayMetadata = any>(\n    options: T,\n  ): ServerAndEventStreamsHost {\n    const uniqueToken = this.generateHashByOptions(options);\n    return this.serverAndEventStreamsHosts.get(uniqueToken);\n  }\n\n  public addOne<T extends GatewayMetadata = any>(\n    options: T,\n    host: ServerAndEventStreamsHost,\n  ) {\n    const uniqueToken = this.generateHashByOptions(options);\n    this.serverAndEventStreamsHosts.set(uniqueToken, host);\n  }\n\n  public clear() {\n    this.serverAndEventStreamsHosts.clear();\n  }\n\n  private generateHashByOptions<T extends GatewayMetadata = any>(\n    options: T,\n  ): string {\n    return hash(options, { ignoreUnknown: true });\n  }\n}\n"]}