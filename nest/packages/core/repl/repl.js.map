{"version":3,"file":"repl.js","sourceRoot":"/Users/hanxiaoxue/Documents/work/frontEndDebugger/nest/packages/core/","sources":["repl/repl.ts"],"names":[],"mappings":";;;AAAA,2CAA6D;AAC7D,0EAA2D;AAC3D,kDAA8C;AAC9C,mEAAyD;AACzD,2CAAuD;AACvD,iDAA6C;AAC7C,+CAA2C;AAC3C,iEAAqE;AAE9D,KAAK,UAAU,IAAI,CAAC,MAA4B;IACrD,MAAM,GAAG,GAAG,MAAM,0BAAW,CAAC,wBAAwB,CAAC,MAAM,EAAE;QAC7D,YAAY,EAAE,KAAK;QACnB,MAAM,EAAE,IAAI,wBAAU,EAAE;KACzB,CAAC,CAAC;IACH,MAAM,GAAG,CAAC,IAAI,EAAE,CAAC;IAEjB,MAAM,WAAW,GAAG,IAAI,0BAAW,CAAC,GAAG,CAAC,CAAC;IACzC,eAAM,CAAC,GAAG,CAAC,oCAAwB,CAAC,CAAC;IAErC,MAAM,KAAK,GAAG,2CAAa,MAAM,EAAC,CAAC;IACnC,MAAM,UAAU,GAAG,KAAK,CAAC,KAAK,CAAC;QAC7B,MAAM,EAAE,qBAAG,CAAC,KAAK,CAAC,IAAI,CAAC;QACvB,eAAe,EAAE,IAAI;KACtB,CAAC,CAAC;IACH,IAAA,sCAAc,EAAC,UAAU,CAAC,OAAO,EAAE,WAAW,CAAC,WAAW,CAAC,CAAC;IAE5D,IAAA,kDAA2B,EAAC,UAAU,CAAC,CAAC;IAExC,OAAO,UAAU,CAAC;AACpB,CAAC;AApBD,oBAoBC","sourcesContent":["import { DynamicModule, Logger, Type } from '@nestjs/common';\nimport { clc } from '@nestjs/common/utils/cli-colors.util';\nimport { NestFactory } from '../nest-factory';\nimport { assignToObject } from './assign-to-object.util';\nimport { REPL_INITIALIZED_MESSAGE } from './constants';\nimport { ReplContext } from './repl-context';\nimport { ReplLogger } from './repl-logger';\nimport { defineDefaultCommandsOnRepl } from './repl-native-commands';\n\nexport async function repl(module: Type | DynamicModule) {\n  const app = await NestFactory.createApplicationContext(module, {\n    abortOnError: false,\n    logger: new ReplLogger(),\n  });\n  await app.init();\n\n  const replContext = new ReplContext(app);\n  Logger.log(REPL_INITIALIZED_MESSAGE);\n\n  const _repl = await import('repl');\n  const replServer = _repl.start({\n    prompt: clc.green('> '),\n    ignoreUndefined: true,\n  });\n  assignToObject(replServer.context, replContext.globalScope);\n\n  defineDefaultCommandsOnRepl(replServer);\n\n  return replServer;\n}\n"]}